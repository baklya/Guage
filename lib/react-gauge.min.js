var React=require("react"),ReactGauge=React.createClass({displayName:"ReactGauge",getInitialState:function(){return{radius:this.props.radius,arcStrokeWidth:this.props.arcStrokeWidth,tickOffset:this.props.tickOffset,tickStrokeWidth:this.props.tickStrokeWidth,tickLength:this.props.tickLength,miniTickLength:this.props.miniTickLength,miniTickStrokeWidth:this.props.miniTickStrokeWidth,scaleDivisionNumber:this.props.scaleDivisionNumber,tickLabelOffset:this.props.tickLabelOffset,centralCircleRadius:this.props.centralCircleRadius,isInnerNumbers:this.props.isInnerNumbers,arrowValue:this.props.arrowValue,marks:this.props.marks,ranges:this.props.ranges,aperture:this.props.aperture}},getDefaultProps:function(){return{radius:175,arcStrokeWidth:3,tickOffset:7,tickStrokeWidth:2,tickLength:5,miniTickLength:1,miniTickStrokeWidth:1,scaleDivisionNumber:10,tickLabelOffset:10,centralCircleRadius:10,isInnerNumbers:!1,arrowValue:0,marks:[0,1,2,3,4,5,6],ranges:[{start:0,end:.75,color:"#666"},{start:.75,end:5.5/6,color:"#ffa500"},{start:5.5/6,end:1,color:"#ff0000"}],aperture:80}},handleChange:function(e){this.setState({radius:e.target.radius,arcStrokeWidth:e.target.arcStrokeWidth,tickOffset:e.target.tickOffset,tickStrokeWidth:e.target.tickStrokeWidth,tickLength:e.target.tickLength,miniTickLength:e.target.miniTickLength,miniTickStrokeWidth:e.target.miniTickStrokeWidth,scaleDivisionNumber:e.target.scaleDivisionNumber,tickLabelOffset:e.target.tickLabelOffset,centralCircleRadius:e.target.centralCircleRadius,isInnerNumbers:e.target.isInnerNumbers,arrowValue:e.target.arrowValue,marks:e.target.marks,ranges:e.target.ranges,aperture:e.target.aperture})},propTypes:{radius:React.PropTypes.number,arcStrokeWidth:React.PropTypes.number,tickOffset:React.PropTypes.number,tickStrokeWidth:React.PropTypes.number,tickLength:React.PropTypes.number,miniTickLength:React.PropTypes.number,miniTickStrokeWidth:React.PropTypes.number,scaleDivisionNumber:React.PropTypes.number,tickLabelOffset:React.PropTypes.number,centralCircleRadius:React.PropTypes.number,isInnerNumbers:React.PropTypes.bool,arrowValue:React.PropTypes.number,marks:React.PropTypes.array,ranges:React.PropTypes.arrayOf(React.PropTypes.shape({start:React.PropTypes.number.isRequired,end:React.PropTypes.number.isRequired,color:React.PropTypes.string.isRequired})).isRequired,aperture:React.PropTypes.number},render:function(){var e=this.state.radius,t=this.state.arcStrokeWidth,r=this.state.tickOffset,i=this.state.tickStrokeWidth,a=this.state.tickLength,s=this.state.miniTickLength,n=this.state.miniTickStrokeWidth,c=this.state.scaleDivisionNumber,o=this.state.tickLabelOffset,u=this.state.centralCircleRadius,h=this.state.isInnerNumbers,p=this.state.arrowValue,k=this.state.marks,l=this.state.ranges,m=this.state.aperture,g=450,d=450,f={x:g/2,y:d/2},y=-180+m/2,b=180-m/2,R=b-y,T=function(e,t,r,i){var a=(i-90)*Math.PI/180;return{x:e+r*Math.cos(a),y:t+r*Math.sin(a)}},x=function(){var r=function(r,i,a,s){var n=function(e,t,r,i,a){var s=T(e,t,r,a),n=T(e,t,r,i),c=a-i<=180?"0":"1",o=["M",s.x,s.y,"A",r,r,0,c,0,n.x,n.y].join(" ");return o};return React.createElement("path",{className:"gauge-arc-"+s,key:s,fill:"none",stroke:a,strokeWidth:t,d:n(f.x,f.y,e,r,i)})},i=[];return l.forEach(function(e,t){i.push(r(y+e.start*R,y+e.end*R,e.color,t))}),i},W=function(){var t=[],o=0;return k.forEach(function(i,a,u){if(0!==a)for(var p=R/(u.length-1)/c,k=1;k<c;k++){var l=T(f.x,f.y,e+(h?-1:1)*r,y+a*R/(u.length-1)-p*k),m=T(f.x,f.y,e+(h?-1:1)*(r+s),y+a*R/(u.length-1)-p*k);t.push(React.createElement("line",{className:"gauge-mini-tick",key:o++,stroke:"#b5b5b5",x1:l.x,y1:l.y,x2:m.x,y2:m.y,strokeWidth:n}))}}),k.forEach(function(s,n,c){var u=T(f.x,f.y,e+(h?-1:1)*r,y+n*R/(c.length-1)),p=T(f.x,f.y,e+(h?-1:1)*(r+a),y+n*R/(c.length-1));t.push(React.createElement("line",{className:"gauge-tick",key:o++,stroke:"#b5b5b5",x1:u.x,y1:u.y,x2:p.x,y2:p.y,strokeWidth:i}))}),t},L=function(){var t=[],s=0;return k.forEach(function(n,c,u){var p=T(f.x,f.y,e+(h?-1:1)*(r+a+o),y+c*R/(u.length-1));t.push(React.createElement("text",{className:"gauge-label",key:s++,fill:"#666666",x:p.x,y:p.y,alignmentBaseline:"middle",textAnchor:"middle",strokeWidth:i},n))}),t},S=function(){var t=[],i=0,s=T(f.x,f.y,u/2,y+R*p-90),n=T(f.x,f.y,e+(h?-1:1)*(r+a/2),y+R*p),c=T(f.x,f.y,u/2,y+R*p+90),o=["M",s.x,s.y,"L",n.x,n.y,"L",c.x,c.y,"Z"].join(" ");return t.push(React.createElement("path",{className:"gauge-arrow",key:i++,fill:"#1e98e4",d:o})),t.push(React.createElement("circle",{className:"gauge-arrow",key:i++,fill:"#1e98e4",cx:f.x,cy:f.y,r:u})),t};return React.createElement("svg",{className:"gauge",width:g,height:d,shapeRendering:"geometricPrecision"},x(),W(),L(),S())}});module.exports=ReactGauge;